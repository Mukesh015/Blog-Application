(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6929],{8436:function(e,t,r){Promise.resolve().then(r.bind(r,4861))},4861:function(e,t,r){"use strict";r.r(t);var n=r(3827),s=r(6123),o=r(4090),i=r(146),a=r(7907);r(8062),t.default=()=>{let[e,t]=(0,o.useState)(""),[r,l]=(0,o.useState)([]),[c,d]=(0,o.useState)(null),[u,h]=(0,o.useState)(!1),m=i.Z.get("cookie-1"),f=(0,a.useRouter)();(0,o.useEffect)(()=>{(async()=>{try{let r=await fetch("http://localhost:8080/getuser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:m})}),n=await r.json();if(n&&n.username){let e=n.username.email;t(e)}else throw Error("Failed to fetch user data or username is undefined");try{let t=await fetch("http://localhost:8080/getposts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderEmail:e})});if(!t.ok)throw Error("Failed to fetch posts");let r=await t.json();l(r)}catch(e){console.error("Failed to fetch posts",e)}}catch(e){console.error("Failed to fetch email",e)}})()},[m,e]);let g=async e=>{f.push("/blogs/".concat(e))},p=async e=>{d(e),h(!0)},x=async()=>{try{if((await fetch("http://localhost:8080/deletequery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:c})})).ok)s.toast.success("post deleted successfully",{position:"top-right",autoClose:900,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"}),setTimeout(()=>{window.location.reload()},1e3);else throw Error("Failed to delete query")}catch(e){console.log("Delete opration failed, server",e)}},v=()=>{h(!1),d(null)},y=e=>{let{post:t}=e,[r,s]=(0,o.useState)(!1),[i,a]=(0,o.useState)(!1),l=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let e=e=>{l.current&&!l.current.contains(e.target)&&s(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,n.jsxs)("div",{className:"mb-4 mt-10",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("p",{className:"font-semibold cursor-pointer hover:text-blue-500",onClick:()=>g(t.query),children:t.query}),(0,n.jsxs)("div",{className:"relative",ref:l,children:[(0,n.jsx)("button",{onClick:()=>{s(!r)},className:"inline-flex p-2 text-sm font-medium text-center text-gray-900 bg-white rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none dark:text-white focus:ring-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-600",type:"button",children:(0,n.jsx)("svg",{className:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 4 15",children:(0,n.jsx)("path",{d:"M3.5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 6.041a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 5.959a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})})}),r&&(0,n.jsx)("div",{className:"absolute z-10 bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700 dark:divide-gray-600 mt-2",style:{maxWidth:"10rem"},children:(0,n.jsxs)("ul",{className:"py-2 text-sm text-gray-700 dark:text-gray-200",children:[(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"#",className:"hover:bg-green-500 block px-4 py-2 dark:hover:text-white",children:"Edit"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"#",onClick:()=>p(t.query),className:"block px-4 py-2 hover:bg-red-500 dark:hover:text-white",children:"Delete"})})]})})]})]}),(0,n.jsx)("span",{className:"border-b border-gray-400 block mt-2"})]})};return(0,n.jsxs)("div",{className:"mt-20 ml-80 mr-20",children:[r&&r.length>0?r.map((e,t)=>(0,n.jsx)(y,{post:e},t)):(0,n.jsx)("p",{children:"No Available posts from this account"}),u&&(0,n.jsx)("div",{id:"deleteModal",tabIndex:"-1","aria-hidden":"true",className:"fixed inset-0 z-50 overflow-hidden flex justify-center items-center",children:(0,n.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,n.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,n.jsxs)("div",{className:"relative w-full max-w-md p-4 bg-white rounded-lg shadow-xl sm:p-6",children:[(0,n.jsx)("button",{onClick:v,type:"button",className:"absolute top-0 right-0 p-2 m-2 text-gray-400 bg-transparent rounded-lg hover:bg-gray-200 hover:text-gray-900",children:(0,n.jsx)("svg",{className:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("svg",{className:"text-gray-400 w-12 h-12 mx-auto","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,n.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Are you sure?"}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Do you really want to delete this item? This action cannot be undone."})}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("button",{onClick:x,type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Yes, delete"}),(0,n.jsx)("button",{onClick:v,type:"button",className:"inline-flex justify-center px-4 py-2 ml-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})]})})})})]})}},7907:function(e,t,r){"use strict";var n=r(5313);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},8062:function(){},146:function(e,t,r){"use strict";/*! js-cookie v3.0.5 | MIT */function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{Z:function(){return s}});var s=function e(t,r){function s(e,s,o){if("undefined"!=typeof document){"number"==typeof(o=n({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var a in o)o[a]&&(i+="; "+a,!0!==o[a]&&(i+="="+o[a].split(";")[0]));return document.cookie=e+"="+t.write(s,e)+i}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},s=0;s<r.length;s++){var o=r[s].split("="),i=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(n[a]=t.read(i,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){s(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[6123,2971,8069,1744],function(){return e(e.s=8436)}),_N_E=e.O()}]);