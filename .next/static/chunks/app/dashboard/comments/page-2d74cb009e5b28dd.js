(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5247],{3995:function(e,t,r){Promise.resolve().then(r.bind(r,5926))},5926:function(e,t,r){"use strict";r.r(t);var o=r(3827),n=r(4090),s=r(146),i=r(7907);t.default=()=>{let[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)(!1),[c,l]=(0,n.useState)(""),u=s.Z.get("cookie-1"),d=(0,i.useRouter)(),m=(0,n.useCallback)(async()=>{try{let e=await fetch("http://localhost:8080/verifyJWT",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:u})});200===e.status?console.log("User loggedin"):(console.log("You are not eligible to access this route ! Please login first"),d.push("/login"))}catch(e){console.error("Server error autologin failed",e)}},[u,d]),f=(0,n.useCallback)(async()=>{try{let e=await fetch("http://localhost:8080/getuser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:u})}),t=(await e.json()).username.email;l(t)}catch(e){console.log("failed to fetch Email",e)}},[u]),h=(0,n.useCallback)(async()=>{a(!0);try{let e=await fetch("http://localhost:8080/getcomments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authorEmail:c})});if(!e.ok)throw Error("Failed to fetch comments");let r=await e.json();t(r)}catch(e){console.error("Failed to fetch comments",e)}},[c]);return(0,n.useEffect)(()=>{m(),f(),h()},[m,f,h]),(0,o.jsx)("div",{className:"mr-16 ml-80 mt-20",children:(0,o.jsx)("ol",{className:"relative border-s border-gray-200 dark:border-gray-700",children:e.length>0?e.map((e,t)=>(0,o.jsxs)("li",{children:[(0,o.jsx)("span",{className:" absolute flex items-center justify-center w-6 h-6 bg-blue-100 rounded-full -start-3 ring-8 ring-white dark:ring-gray-900 dark:bg-blue-900"}),(0,o.jsx)("h2",{className:"pb-7 pl-6  cursor-pointer text-yellow-400 hover:text-blue-500",children:e.query[0].query}),(0,o.jsx)("ul",{children:e.descriptions.map((e,t)=>(0,o.jsx)("li",{className:"mb-8 ms-6",children:(0,o.jsxs)("div",{className:"items-center justify-between p-4 bg-white border border-gray-200 rounded-lg shadow-sm sm:flex dark:bg-gray-700 dark:border-gray-600",children:[(0,o.jsx)("time",{className:"mb-1 text-xs font-normal text-lime-500 sm:order-last sm:mb-0",children:e.timestamp}),(0,o.jsx)("div",{className:"text-sm font-normal text-gray-500 dark:text-gray-300",children:e.description})]})},t))})]},t)):(0,o.jsx)("h1",{className:"font-extrabold text-center",children:"No comments posted"})})})}},7907:function(e,t,r){"use strict";var o=r(5313);r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}})},146:function(e,t,r){"use strict";/*! js-cookie v3.0.5 | MIT */function o(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)e[o]=r[o]}return e}r.d(t,{Z:function(){return n}});var n=function e(t,r){function n(e,n,s){if("undefined"!=typeof document){"number"==typeof(s=o({},r,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var a in s)s[a]&&(i+="; "+a,!0!==s[a]&&(i+="="+s[a].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+i}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],o={},n=0;n<r.length;n++){var s=r[n].split("="),i=s.slice(1).join("=");try{var a=decodeURIComponent(s[0]);if(o[a]=t.read(i,a),e===a)break}catch(e){}}return e?o[e]:o}},remove:function(e,t){n(e,"",o({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,o({},this.attributes,t))},withConverter:function(t){return e(o({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[2971,8069,1744],function(){return e(e.s=3995)}),_N_E=e.O()}]);